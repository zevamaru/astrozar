function $(e){return document.querySelector(e)}function generate_deck(){const e=[];for(let t=0;t<10;t++){let t;do{t=Math.floor(10*Math.random())}while(e.includes(t));e.push(t)}return e}function show_deck(e){null===user[e]&&(user.target=e,$("#btnChoose").disabled=!1,$("#deck").classList.add("appear"),deckSwiper.slideTo(5,0),deckSwiper.update(),deckSwiper.update(),deckSwiper.enable())}function chosen(){user.target&&($("#btnChoose").disabled=!0,user.decks.circle=generate_deck(),user.decks.square=generate_deck(),user.decks.triangle=generate_deck(),user[user.target]=user.decks[user.target][deckSwiper.activeIndex],$("#deck").classList.remove("appear"),$("#chosen").classList.remove("hide"),animate("#card-back","wobble").then((()=>{animate("#card-back","flipOutY").then((()=>{$("#card-back").classList.add("hide"),$("#card-front").classList.remove("hide"),animate("#card-front","flipInY").then((()=>{animate("#card-front","zoomOutUp").then((()=>{$("#card-front").classList.add("hide"),$(`.slot.${[user.target]}`).classList.remove("pulse"),$(`.slot.${[user.target]}`).classList.add("done"),$(`.slot.${[user.target]}`).classList.add("float"),cardEffect(`.slot.${[user.target]}`),animate("#chosen","fadeOut").then((()=>{$("#chosen").classList.add("hide"),$("#card-back").classList.remove("hide"),$("#btnChoose").disabled=!1,"number"==typeof user.triangle&&"number"==typeof user.square&&"number"==typeof user.circle&&alea_iacta_est()}))}))}))}))})))}function next(){swiper.allowSlideNext=!0,swiper.slideNext(600),swiper.allowSlideNext=!1}function answer(){user.query&&($(".query").innerText=user.query,$(".answer").innerText="Lorem ipsum dolor sit amet consectetur adipisicing elit. Nam omnis autem, eligendi, minus asperiores repudiandae et consequatur ab accusantium vero quod similique velit modi magni dolorum obcaecati incidunt sunt ipsa!",swiper.allowSlideNext=!0,swiper.slideNext(600),swiper.allowSlideNext=!1)}function alea_iacta_est(){console.log(`Alea iacta est: ${user.triangle} ${user.circle} ${user.square}`)}function animate(e,t,s="animate__"){return new Promise(((a,r)=>{const n=`${s}${t}`,i=$(e);i.classList.add(`${s}animated`,n),i.addEventListener("animationend",(function(e){e.stopPropagation(),i.classList.remove(`${s}animated`,n),a("Animation ended")}),{once:!0})}))}const user={decks:{triangle:null,square:null,circle:null},query:null,target:null,timer:null,triangle:null,square:null,circle:null},swiper=new Swiper(".mySwiper",{speed:600,parallax:!0,allowSlideNext:!1,allowSlidePrev:!1,autoHeight:!0,direction:"vertical",animating:!1}),deckSwiper=new Swiper(".mySwiperDeck",{effect:"cards",grabCursor:!0,mousewheel:!0,enabled:!1,keyboard:!0,initialSlide:5});function rotateToMouse(e,t,s){const a=e.clientX,r=e.clientY,n=a-s.x,i=r-s.y,o=n-s.width/2,c=i-s.height/2;t.querySelector(".glow").style.backgroundImage=`\n    radial-gradient(\n      circle at\n      ${2*o+s.width/2}px\n      ${2*c+s.height/2}px,\n      #ffffff55,\n      #0000000f\n    )\n  `}function cardEffect(e){const t=document.querySelector(e),s=t.getBoundingClientRect();t.addEventListener("mouseenter",(()=>{document.addEventListener("mousemove",(e=>{rotateToMouse(e,t,s)}))})),t.addEventListener("mouseleave",(()=>{document.removeEventListener("mousemove",(e=>{rotateToMouse(e,t,s)})),t.style.transform="",t.style.background=""}))}$("#btnAsk").onclick=e=>{e.preventDefault(),next()},$("textarea").oninput=e=>{const t=e.target.value.length;t>20&&t<255?(user.query=e.target.value,$("#btnDraw").classList.contains("disabled")&&($("#btnDraw").classList.remove("disabled"),$("#btnDraw").classList.add("pulse"))):(user.query=null,$("#btnDraw").classList.contains("disabled")||($("#btnDraw").classList.add("disabled"),$("#btnDraw").classList.remove("pulse")))},$("#btnDraw").onclick=e=>{e.preventDefault(),user.query&&(setTimeout(next,3e3),next(),user.decks.circle=generate_deck(),user.decks.square=generate_deck(),user.decks.triangle=generate_deck())},$(".slot.triangle").onclick=()=>{show_deck("triangle")},$(".slot.circle").onclick=()=>{show_deck("circle")},$(".slot.square").onclick=()=>{show_deck("square")},$("#btnBack").onclick=()=>{$("#deck").classList.remove("appear"),deckSwiper.disable()},$("#btnChoose").onmousedown=()=>{user.timer=setTimeout((()=>{chosen()}),1e3)},$("#btnChoose").onmouseup=()=>{clearTimeout(user.timer)},$("#btnChoose").ontouchstart=()=>{user.timer=setTimeout((()=>{chosen()}),1e3)},$("#btnChoose").ontouchend=()=>{clearTimeout(user.timer)};